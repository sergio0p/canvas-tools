{
  "schema": {
    "type": "object",
    "properties": {
      "grade": {
        "type": "number",
        "enum": [0, 0.175, 0.2, 0.35, 0.4, 0.525, 0.6, 0.7, 0.8, 0.875, 1.0, 1.05, 1.2, 1.225, 1.4, 1.575, 1.6, 1.75, 1.8, 1.925, 2.0, 2.1, 2.275, 2.4, 2.45, 2.6, 2.625, 2.8, 2.975, 3.0, 3.15, 3.325, 3.5, 3.675, 3.8, 4.0]
      },
      "feedback": {
        "type": "string",
        "minLength": 0,
        "maxLength": 4000
      }
    },
    "required": ["grade", "feedback"],
    "additionalProperties": false
  },
  "instructions": "Grade a student submission with 3 parts. Total: 4.0 points.\n\nQUESTION CONTEXT:\nTwo agents (Antonia and Marie), two goods (X and Y), three periods (0, 1, 2).\nPrices: p0=(1.5,1.5), p1=(1,2), p2=(2,1). Income i=30 for both.\n\nAntonia: Buys at least 22 units of X if affordable, otherwise only X. If 22*p_X < i, buys 22 units of X and uses remaining income for Y.\n\nMarie: Uses 90% of income on most expensive good, 10% on least expensive. If prices equal, splits income equally between both goods.\n\nSTUDENT SUBMISSION FORMAT:\nStructured JSON with:\n- \"content\": array of text sections and tables\n- Tables have \"blue_entries\": list of relations student marked blue\n\n═══════════════════════════════════════════════════════════════════════════════\nPART 1: ANTONIA'S BASKETS (0.6 points)\n═══════════════════════════════════════════════════════════════════════════════\n\nCORRECT ANSWERS:\nA0 = (20, 0)\nA1 = (22, 4)\nA2 = (15, 0)\n\nGRADING:\n- Each correct basket = 0.2 points\n- Accept format variations: (20,0), (20, 0), A0=(20,0) all acceptable\n- Numbers must be exact\n\nPART 1 SCORING:\n- All 3 correct: 0.6 points\n- 2 correct: 0.4 points\n- 1 correct: 0.2 points\n- 0 correct: 0 points\n\n═══════════════════════════════════════════════════════════════════════════════\nPART 2: MARIE'S BASKETS (0.6 points)\n═══════════════════════════════════════════════════════════════════════════════\n\nCORRECT ANSWERS:\nM0 = (10, 10)\nM1 = (3, 13.5)\nM2 = (13.5, 3)\n\nGRADING:\n- Each correct basket = 0.2 points\n- Accept format variations\n- Numbers must be exact (13.5 not 13 or 14)\n\nPART 2 SCORING:\n- All 3 correct: 0.6 points\n- 2 correct: 0.4 points\n- 1 correct: 0.2 points\n- 0 correct: 0 points\n\n═══════════════════════════════════════════════════════════════════════════════\nPART 3: COLORED TABLES (2.8 points)\n═══════════════════════════════════════════════════════════════════════════════\n\nCORRECT BLUE ENTRIES (16 total):\n\nTable 1 - Directly revealed relation (Antonia): 3 entries\n• A0 ≥DR A2\n• A1 ≥DR A0\n• A1 ≥DR A2\n\nTable 2 - Strict revealed relation (Antonia): 3 entries\n• A0 >SDR A2\n• A1 >SDR A0\n• A1 >SDR A2\n\nTable 3 - Directly revealed relation (Marie): 6 entries\n• M0 ≥DR M1\n• M0 ≥DR M2\n• M1 ≥DR M0\n• M1 ≥DR M2\n• M2 ≥DR M0\n• M2 ≥DR M1\n\nTable 4 - Strict revealed relation (Marie): 4 entries\n• M0 >SDR M1\n• M0 >SDR M2\n• M1 >SDR M2\n• M2 >SDR M1\n\nGRADING:\n- Count correct blue entries from student's tables\n- Each correct match = 0.175 points\n- Ignore spacing: \"A0 ≥DR A2\" = \"A0≥DRA2\"\n- Be strict: entry must exactly match correct list\n- Grade = (correct count) × 0.175, max 2.8\n\n═══════════════════════════════════════════════════════════════════════════════\nFEEDBACK FORMAT\n═══════════════════════════════════════════════════════════════════════════════\n\nIf ALL parts perfect (4.0 points):\n  feedback = \"\" (empty string)\n\nOtherwise, provide line-by-line feedback:\n\nPart 1: [feedback if incorrect] ([points])\nPart 2: [feedback if incorrect] ([points])\nPart 3: [feedback if incorrect] ([points])\nTotal: [total]/4.0\n\nPart 1/2 feedback format (if incorrect):\n  \"A0=(20,0), A1=(22,4), A2=(15,0) but your answer has [description] ([points])\"\n  \"M0=(10,10), M1=(3,13.5), M2=(13.5,3) but your answer has [description] ([points])\"\n\nPart 3 feedback format (if incorrect):\n  \"[correct count]/16 ([points])\"\n\n═══════════════════════════════════════════════════════════════════════════════\nEXAMPLES\n═══════════════════════════════════════════════════════════════════════════════\n\nEXAMPLE 1 - Perfect score:\nStudent has all correct.\nGrade: 4.0\nFeedback: \"\"\n\nEXAMPLE 2 - Part 1 error:\nPart 1: A0=(15,5), A1=(22,4), A2=(15,0)\nPart 2: All correct\nPart 3: 16/16 correct\nGrade: 3.8\nFeedback: \"Part 1: A0=(20,0), A1=(22,4), A2=(15,0) but your answer has A0=(15,5) (0.4 points)\\nPart 2: (0.6 points)\\nPart 3: (2.8 points)\\nTotal: 3.8/4.0\"\n\nEXAMPLE 3 - Part 2 missing value:\nPart 1: All correct\nPart 2: M0=(10,10), M1=(3,13.5), no M2\nPart 3: 14/16 correct\nGrade: 3.45\nFeedback: \"Part 1: (0.6 points)\\nPart 2: M0=(10,10), M1=(3,13.5), M2=(13.5,3) but your answer has no value for M2 (0.4 points)\\nPart 3: 14/16 (2.45 points)\\nTotal: 3.45/4.0\"\n\nEXAMPLE 4 - Part 3 partial:\nPart 1: All correct\nPart 2: All correct\nPart 3: 10/16 correct\nGrade: 2.95\nFeedback: \"Part 1: (0.6 points)\\nPart 2: (0.6 points)\\nPart 3: 10/16 (1.75 points)\\nTotal: 2.95/4.0\"\n\nEXAMPLE 5 - Multiple errors:\nPart 1: A0=(10,10), A1=(22,4), A2=(15,0)\nPart 2: M0=(15,15), M1=(3,13.5), M2=(13.5,3)\nPart 3: 12/16 correct\nGrade: 2.9\nFeedback: \"Part 1: A0=(20,0), A1=(22,4), A2=(15,0) but your answer has A0=(10,10) (0.4 points)\\nPart 2: M0=(10,10), M1=(3,13.5), M2=(13.5,3) but your answer has M0=(15,15) (0.4 points)\\nPart 3: 12/16 (2.1 points)\\nTotal: 2.9/4.0\"\n\n═══════════════════════════════════════════════════════════════════════════════\nIMPORTANT\n═══════════════════════════════════════════════════════════════════════════════\n\n- Calculate total grade = Part1 + Part2 + Part3\n- Return only valid JSON with grade and feedback fields\n- Be strict with numbers but accept format variations\n- For Part 3, only count entries that exactly match correct list (ignore spacing)"
}